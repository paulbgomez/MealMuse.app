name: MealMuse Cooking
on:
  pull_request:
  push:
    branches:
      - main
jobs:
  code_quality_checks_and_tests:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        node-version: [16.x]
    steps:
      - name: Checkout ğŸ›ï¸ğŸ›’
        uses: actions/checkout@v2
      - name: Setup JDK ğŸŒŸ
        uses: actions/setup-java@v2
        with:
          java-version: 11
          distribution: 'temurin'
      - name: Install ktlint ğŸ”§
        run: |
          curl -sSLO https://github.com/pinterest/ktlint/releases/download/0.42.1/ktlint && chmod a+x ktlint && sudo mv ktlint /usr/local/bin/
      - name: Run ktlint ğŸš¦
        run: ktlint -F "app/**/*.kt"
      - name: Build and test app ğŸš€
        run: |
          ./gradlew assembleDebug testDebug
      - name: Report test results ğŸ“Š
        uses: mikepenz/action-junit-report@v2
        with:
          report_paths: '**/test-results/**/*.xml'
      - name: Display success message ğŸ‰
        if: ${{ job.status == 'success' }}
        run: echo "ğŸ‰ Congratulations, ${{ github.actor }}! All checks passed. ğŸš€"
      - name: Display failure message ğŸ’¥
        if: ${{ job.status != 'success' }}
        run: echo "ğŸ’¥ Sorry, ${{ github.actor }}. There were issues with your code. ğŸ˜"
